Анализ схемы и описание системы
1) Схема не отображает, какими топиками/сообщениями обмениваются сервисы
2) В задание утверждается, что с аутентификацией все хорошо, однако именно при открытие B2B АПИ возникли проблемы с простоями
3) заказы лежат или обрабатываются вместе с 3d моделями. По схеме неясно, что выполняет 3d files storage
4) На Mes API завязаны все вычисления которые идут и от клиентов и от партнеров. 
5) CRM API взаимодействует с Shop Db - либо это ошибка схемы/ либо сильная связанность двух предметных областей: данные заказов и данные полей/ответсвенностей
6) 3d-files storage непонятно, это база данных или сервис.
    - если сервис, тогда неясно, где хранятся модели
    - если база, то 3 сервиса имеют сильну связанность относительно одного хранилища
7) есть shopDb - которое хранит информацию по работе с заказами/покупателям, однако есть MESdb, которая хранит так же информацию по заказам, их статусу и выполнению. В чем отличие? 
8) на схеме не показано, как заказ из магазина создается в CRM


Что стоит изменить/какие нежелательные ситуации
1) Актуализация схемы с учетом проблемных моментов: 
   - отображение топиков/сообщений, которыми обмениваются сервисы
   - корректное отображение сервисов/БД
   - ввести или дополнить корректное описание сервисов
2) Кешировать данные, с которыми работает MES-API. Часто запрашиваемые данные: данные заказа, расчеты и прочее - можно кешировать refresh-ahead подходом
3) Расчет стоимоисть можно выделить из MES-API, тем самым снизив нагрузку на данный сервис
4) Можно создать Api-gateway, через который все сервисы могут общаться к MES-api или сервису расчета стоимости, с возможностью дальнейшего горизонтального масштабирования
5) Введение rate limiting для внешних АПИ
6) Логирование для выявление аномального поведения системы/входящих запросов


Приоритеты изменений
1) Снизить нагрузку на MES-Api 
 - Причина: Первоначально надо решить проблему, которая снижает конверсию и мешает работать бизнесу. Нужно увеличить KPI ключевого сервиса, на котором держится весь бизнес. 
 - Способы: 
    - Уменьшить нагрузку на сервис: уменьшить количество входящих запросов, которые приходят напрямую со стороны партнеров
    - Кешировать ответы все ответы по принципу refresh-ahead. Это позволит снизить нагрузку на вычислительные ресурсы. 
    - Подготовить среду для горизонтального масштабирования MES-API
2) Измениния в It командах
 - Причина: Отсутсвуют автотесты. Нехватка разработчиков react. QA простаивает во время разработчки новых задач. 
 - Детальнее: 
    - QA перевести в автотестирование. Если необходимо отправить на дообучение. 
    - Дополнительный разработчик React позволит усилить сопровождение и разработку нового функционала MES
3) Добавить мониторинг системы
 - Причины: На данный момент выявление аномальных ситуаций обнаруживается, когда уже стало поздно.
 - Способы: 
      - внедрение Prometheus для сбора метрик и оповещения



Какой должна быть архитектура через полгода
- Стабильной и устойчивой к росту нагрузки. 
- Расчет цены не должен влиять на выдачу информации о заказе клиенту. 
- MES работает только производственными статусами. 
- Все базы данных содержат реплики для чтения, которыми пользуются аналитики, по которым считаются отчеты и так далее
- Наблюдаемость: 
    - структурированные логи в ELK, 
    - метрики в Prometheus c оповещение об аномальной активности,
    - трейсинг через OpenTelemtry/Jaeger для выявления узких мест на случай инцидентов
- Достигнуты результаты:
   - Ответы на запросы по статусу заказа выдается мгновенно
   - Снижение числа жалоб на 80%
   - Доля зависших заказов < 1%
   - Время расчета цены, как мнимум вернулось к изначальным показателям 2-3 минут, а то и улучшилось до 30 секунд